<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nexus Notes | Modern Note Taking App</title>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- SweetAlert2 -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css"
    />

    <!-- Quill Editor -->
    <link
      href="https://cdn.quilljs.com/1.3.7/quill.snow.css"
      rel="stylesheet"
    />

    <!-- Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <!-- Export Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://unpkg.com/docx@7.8.1/build/index.js"></script>

    <!-- Custom CSS (legacy) -->
    <link rel="stylesheet" href="/css/dashboard.css" />
  </head>
  <body>
    <!-- Main App (Hidden Initially) -->
    <div class="app-container" id="appContainer" style="display: none">
      <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div class="toggle-sidebar" id="toggleSidebar">
          <i class="fas fa-chevron-left"></i>
        </div>

        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-sticky-note"></i>
          </div>
          <div class="logo-text">Note Taker</div>
        </div>

        <div class="category-list">
          <div class="section-title">Categories</div>
          <div class="category-item active" data-category="all">
            <div class="category-icon all">
              <i class="fas fa-inbox"></i>
            </div>
            <span class="category-text">All Notes</span>
          </div>
          <div class="category-item" data-category="personal">
            <div class="category-icon personal">
              <i class="fas fa-user"></i>
            </div>
            <span class="category-text">Personal</span>
          </div>
          <div class="category-item" data-category="work">
            <div class="category-icon work">
              <i class="fas fa-briefcase"></i>
            </div>
            <span class="category-text">Work</span>
          </div>
          <div class="category-item" data-category="ideas">
            <div class="category-icon ideas">
              <i class="fas fa-lightbulb"></i>
            </div>
            <span class="category-text">Ideas</span>
          </div>
          <div class="category-item" data-category="todo">
            <div class="category-icon todo">
              <i class="fas fa-tasks"></i>
            </div>
            <span class="category-text">To-Do</span>
            <span class="trash-count" id="todoCount" style="display: none"
              >0</span
            >
          </div>
          <div class="category-item" data-category="trash">
            <div class="category-icon trash">
              <i class="fas fa-trash"></i>
            </div>
            <span class="category-text">Trash</span>
            <span class="trash-count" id="trashCount" style="display: none"
              >0</span
            >
          </div>
        </div>

        <div class="tag-list">
          <div class="section-title">Tags</div>
          <div class="tag-item" data-tag="important">
            <div class="tag-icon">
              <i class="fas fa-star"></i>
            </div>
            <span class="tag-text">Important</span>
          </div>
          <div class="tag-item" data-tag="meeting">
            <div class="tag-icon">
              <i class="fas fa-users"></i>
            </div>
            <span class="tag-text">Meeting</span>
          </div>
          <div class="tag-item" data-tag="project">
            <div class="tag-icon">
              <i class="fas fa-project-diagram"></i>
            </div>
            <span class="tag-text">Project</span>
          </div>
          <div class="tag-item" data-tag="ideas">
            <div class="tag-icon">
              <i class="fas fa-lightbulb"></i>
            </div>
            <span class="tag-text">Ideas</span>
          </div>
        </div>

        <button class="new-note-btn" id="newNoteBtn">
          <i class="fas fa-plus-circle"></i>
          <span class="new-note-text">New Note</span>
        </button>

        <div class="user-info" id="userInfo">
          <div class="user-avatar" id="userAvatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="user-details">
            <div class="user-name" id="userName">Guest User</div>
            <div class="user-email" id="userEmail">Using Local Storage</div>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="top-bar">
          <div class="search-container">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input
                type="text"
                id="searchInput"
                placeholder="Search notes..."
              />
            </div>
          </div>

          <div class="stats-container">
            <div class="stat-item">
              <div class="stat-icon notes">
                <i class="fas fa-sticky-note"></i>
              </div>
              <div class="stat-info">
                <h3 id="totalNotes">0</h3>
                <p>Total Notes</p>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-icon pinned">
                <i class="fas fa-thumbtack"></i>
              </div>
              <div class="stat-info">
                <h3 id="pinnedNotes">0</h3>
                <p>Pinned</p>
              </div>
            </div>
          </div>

          <div class="top-bar-actions">
            <button class="btn btn-secondary" id="themeToggleBtn">
              <i class="fas fa-moon"></i>
              <span>Dark Mode</span>
            </button>
            <button class="btn btn-secondary" id="exportBtn">
              <i class="fas fa-download"></i> Export
            </button>
            <button
              class="btn btn-outline-danger"
              id="logoutBtn"
              style="display: none"
            >
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        </div>

        <div class="notes-grid" id="notesGrid">
          <!-- Notes will be added here -->
        </div>

        <!-- To-Do Panel -->
        <div class="task-panel" id="taskPanel" style="display: none">
          <div class="task-panel-header">
            <h2>To-Do Lists</h2>
            <button class="btn btn-primary" id="createTodoBtn">
              <i class="fas fa-plus-circle"></i> New To-Do List
            </button>
          </div>

          <div class="task-stats">
            <div class="stat-item">
              <div class="stat-icon">
                <i class="fas fa-tasks"></i>
              </div>
              <div class="stat-info">
                <h3 id="totalTasks">0</h3>
                <p>Total Tasks</p>
              </div>
            </div>
            <div class="stat-item">
              <div
                class="stat-icon"
                style="background: rgba(16, 185, 129, 0.1); color: #10b981"
              >
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="stat-info">
                <h3 id="completedTasks">0</h3>
                <p>Completed</p>
              </div>
            </div>
            <div class="stat-item">
              <div
                class="stat-icon"
                style="background: rgba(245, 158, 11, 0.1); color: #f59e0b"
              >
                <i class="fas fa-clock"></i>
              </div>
              <div class="stat-info">
                <h3 id="pendingTasks">0</h3>
                <p>Pending</p>
              </div>
            </div>
            <div class="stat-item">
              <div
                class="stat-icon"
                style="background: rgba(239, 68, 68, 0.1); color: #ef4444"
              >
                <i class="fas fa-exclamation-circle"></i>
              </div>
              <div class="stat-info">
                <h3 id="overdueTasks">0</h3>
                <p>Overdue</p>
              </div>
            </div>
          </div>

          <div class="todo-list-container" id="todoListContainer">
            <!-- To-Do lists will be added here -->
          </div>
        </div>

        <!-- Trash Container -->
        <div class="trash-container" id="trashContainer" style="display: none">
          <!-- Trash content will be added here -->
        </div>

        <div class="empty-state" id="emptyState" style="display: none">
          <div class="empty-icon">
            <i class="fas fa-sticky-note"></i>
          </div>
          <h3>No notes found</h3>
          <p class="text-secondary">
            Create your first note by clicking the "New Note" button
          </p>
          <button class="btn btn-primary mt-3" id="createFirstNoteBtn">
            <i class="fas fa-plus-circle"></i> Create Your First Note
          </button>
        </div>
      </div>

      <!-- Editor Modal -->
      <div class="editor-modal" id="editorModal">
        <div class="editor-container">
          <div class="editor-header">
            <h2 class="editor-title" id="editorTitle">New Note</h2>
            <button class="note-action-btn" id="closeEditorBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="editor-body">
            <form id="noteForm">
              <div class="form-group">
                <input
                  type="text"
                  class="form-control"
                  id="noteTitle"
                  placeholder="Note Title"
                  required
                />
              </div>

              <div class="form-group">
                <div id="editor"></div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <select class="form-control" id="noteCategory">
                      <option value="personal">Personal</option>
                      <option value="work">Work</option>
                      <option value="ideas">Ideas</option>
                      <option value="todo">To-Do</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <input
                      type="text"
                      class="form-control"
                      id="noteTags"
                      placeholder="Add tags (comma separated)"
                    />
                  </div>
                </div>
              </div>

              <div class="form-check mb-3">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="notePinned"
                />
                <label class="form-check-label" for="notePinned">
                  Pin this note
                </label>
              </div>
            </form>
          </div>

          <div class="editor-footer">
            <button class="btn btn-secondary" id="cancelNoteBtn">Cancel</button>
            <div>
              <button class="btn btn-primary" id="saveNoteBtn">
                <i class="fas fa-save"></i> Save Note
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- To-Do Editor Modal -->
      <div class="editor-modal" id="todoEditorModal">
        <div class="editor-container">
          <div class="editor-header">
            <h2 class="editor-title" id="todoEditorTitle">New To-Do List</h2>
            <button class="note-action-btn" id="closeTodoBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="editor-body">
            <form id="todoForm">
              <div class="form-group">
                <input
                  type="text"
                  class="form-control"
                  id="todoTitle"
                  placeholder="To-Do List Title"
                  required
                />
              </div>

              <div class="form-group">
                <textarea
                  class="form-control"
                  id="todoDescription"
                  placeholder="Description (optional)"
                  rows="2"
                ></textarea>
              </div>

              <div class="form-group">
                <label>Tasks</label>
                <div class="todo-list-editor" id="todoListEditor">
                  <!-- Tasks will be added here dynamically -->
                </div>
                <button
                  type="button"
                  class="btn btn-outline-secondary btn-sm mt-2"
                  id="addTaskBtn"
                >
                  <i class="fas fa-plus"></i> Add Task
                </button>
              </div>

              <div class="form-check mb-3">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="todoPinned"
                />
                <label class="form-check-label" for="todoPinned">
                  Pin this to-do list
                </label>
              </div>
            </form>
          </div>

          <div class="editor-footer">
            <button class="btn btn-secondary" id="cancelTodoBtn">Cancel</button>
            <div>
              <button class="btn btn-primary" id="saveTodoBtn">
                <i class="fas fa-save"></i> Save To-Do List
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Export Modal -->
      <div class="export-modal" id="exportModal">
        <div class="export-container">
          <div class="export-header">
            <h2 class="export-title">Export Notes</h2>
            <button class="note-action-btn" id="closeExportBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="export-body">
            <div class="export-options">
              <div
                class="export-option"
                data-format="pdf"
                tabindex="0"
                role="button"
              >
                <div class="export-icon pdf">
                  <i class="fas fa-file-pdf"></i>
                </div>
                <div class="export-info">
                  <h4>PDF Format</h4>
                  <p>Export as PDF document</p>
                </div>
              </div>
              <div
                class="export-option"
                data-format="txt"
                tabindex="0"
                role="button"
              >
                <div class="export-icon txt">
                  <i class="fas fa-file-alt"></i>
                </div>
                <div class="export-info">
                  <h4>Text Format</h4>
                  <p>Export as plain text file</p>
                </div>
              </div>
              <div
                class="export-option"
                data-format="docx"
                tabindex="0"
                role="button"
              >
                <div class="export-icon docx">
                  <i class="fas fa-file-word"></i>
                </div>
                <div class="export-info">
                  <h4>Word Format</h4>
                  <p>Export as Microsoft Word document</p>
                </div>
              </div>
              <div
                class="export-option"
                data-format="json"
                tabindex="0"
                role="button"
              >
                <div class="export-icon json">
                  <i class="fas fa-file-code"></i>
                </div>
                <div class="export-info">
                  <h4>JSON Format</h4>
                  <p>Export as JSON data for backup</p>
                </div>
              </div>
            </div>

            <div class="export-settings">
              <div class="form-group">
                <label for="exportFormatSelect">Format</label>
                <select id="exportFormatSelect" class="form-control">
                  <option value="pdf">PDF</option>
                  <option value="docx">Word (DOCX)</option>
                  <option value="txt">Text (TXT)</option>
                  <option value="json">JSON</option>
                </select>
              </div>
              <div class="form-check mb-3">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="exportAll"
                  checked
                />
                <label class="form-check-label" for="exportAll">
                  Export all notes
                </label>
              </div>
              <div class="form-check mb-3">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="includeMetadata"
                  checked
                />
                <label class="form-check-label" for="includeMetadata">
                  Include metadata (tags, category, dates)
                </label>
              </div>
              <div class="form-group">
                <label for="exportFileName">File Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="exportFileName"
                  value="nexus-notes-export"
                  placeholder="Enter file name"
                />
              </div>
              <div class="export-actions">
                <button
                  type="button"
                  class="btn btn-cancel"
                  id="cancelExportBtn"
                >
                  Cancel
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  id="startExportBtn"
                >
                  <i class="fas fa-download"></i> Export Notes
                </button>
              </div>
            </div>
          </div>
          <div class="export-footer" style="display: none"></div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    <script src="js/dashboard.js"></script>
  </body>
</html>
